<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>General Assessment ELA Grade 5 – Accessible Longitudinal Report</title>

  <style>
    body {
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
      margin: 1rem;
    }
    .highcharts-figure {
      max-width: 1400px;
      margin: 0 auto;
    }
    @media (prefers-color-scheme: dark) {
      body { background-color: #141414; color: #fff; }
    }
  </style>

  <script src="https://code.highcharts.com/highcharts.js"></script>
</head>
<body>
<figure class="highcharts-figure"><div id="container"></div></figure>

<script>
const csvData = `
Organization Type,Organization,Parent Organization,Test Administration,Average Scale Score,Group
State,State Average,,2021–22,2530,Advanced
State,State Average,,2022–23,2525,Advanced
State,State Average,,2023–24,2565,Advanced
State,State Average,,2024–25,2579,Advanced
State,State Average,,2025–26,2607,Advanced
Region,Horatio Colony Region,State Average,2021–22,2520,Advanced
Region,Horatio Colony Region,State Average,2022–23,2515,Advanced
Region,Horatio Colony Region,State Average,2023–24,2550,Advanced
Region,Horatio Colony Region,State Average,2024–25,2560,Advanced
Region,Horatio Colony Region,State Average,2025–26,2590,Advanced
District,Pleasant Valley School District,Horatio Colony Region,2021–22,2650,Advanced
District,Pleasant Valley School District,Horatio Colony Region,2022–23,2635,Advanced
District,Pleasant Valley School District,Horatio Colony Region,2023–24,2660,Advanced
District,Pleasant Valley School District,Horatio Colony Region,2024–25,2673,Advanced
District,Pleasant Valley School District,Horatio Colony Region,2025–26,2683,Advanced
District,Anderson School District,Horatio Colony Region,2021–22,2560,Advanced
District,Anderson School District,Horatio Colony Region,2022–23,2590,Advanced
District,Anderson School District,Horatio Colony Region,2023–24,2601,Advanced
District,Anderson School District,Horatio Colony Region,2024–25,2640,Advanced
District,Anderson School District,Horatio Colony Region,2025–26,2630,Advanced
District,Coli Lake School District,Horatio Colony Region,2021–22,2780,Advanced
District,Coli Lake School District,Horatio Colony Region,2022–23,2800,Advanced
District,Coli Lake School District,Horatio Colony Region,2023–24,2824,Advanced
District,Coli Lake School District,Horatio Colony Region,2024–25,2766,Advanced
District,Coli Lake School District,Horatio Colony Region,2025–26,2808,Advanced
District,Doristi School District,Horatio Colony Region,2021–22,2660,Advanced
District,Doristi School District,Horatio Colony Region,2022–23,2685,Advanced
District,Doristi School District,Horatio Colony Region,2023–24,2709,Advanced
District,Doristi School District,Horatio Colony Region,2024–25,2750,Advanced
District,Doristi School District,Horatio Colony Region,2025–26,2777,Advanced
District,Davton School District,Horatio Colony Region,2021–22,2480,On Track
District,Davton School District,Horatio Colony Region,2022–23,2460,On Track
District,Davton School District,Horatio Colony Region,2023–24,2514,On Track
District,Davton School District,Horatio Colony Region,2024–25,2552,On Track
District,Davton School District,Horatio Colony Region,2025–26,2555,On Track
District,Eastview School District,Horatio Colony Region,2021–22,2490,On Track
District,Eastview School District,Horatio Colony Region,2022–23,2505,On Track
District,Eastview School District,Horatio Colony Region,2023–24,2540,On Track
District,Eastview School District,Horatio Colony Region,2024–25,2478,On Track
District,Eastview School District,Horatio Colony Region,2025–26,2503,On Track
District,Everton School District,Horatio Colony Region,2021–22,2575,On Track
District,Everton School District,Horatio Colony Region,2022–23,2550,On Track
District,Everton School District,Horatio Colony Region,2023–24,2587,On Track
District,Everton School District,Horatio Colony Region,2024–25,2566,On Track
District,Everton School District,Horatio Colony Region,2025–26,2604,On Track
District,Gaber Hills School District,Horatio Colony Region,2021–22,2460,On Track
District,Gaber Hills School District,Horatio Colony Region,2022–23,2475,On Track
District,Gaber Hills School District,Horatio Colony Region,2023–24,2503,On Track
District,Gaber Hills School District,Horatio Colony Region,2024–25,2541,On Track
District,Gaber Hills School District,Horatio Colony Region,2025–26,2579,On Track
District,Mission School District,Horatio Colony Region,2021–22,2495,On Track
District,Mission School District,Horatio Colony Region,2022–23,2510,On Track
District,Mission School District,Horatio Colony Region,2023–24,2532,On Track
District,Mission School District,Horatio Colony Region,2024–25,2570,On Track
District,Mission School District,Horatio Colony Region,2025–26,2574,On Track
District,Riverview School District,Horatio Colony Region,2021–22,2485,On Track
District,Riverview School District,Horatio Colony Region,2022–23,2490,On Track
District,Riverview School District,Horatio Colony Region,2023–24,2525,On Track
District,Riverview School District,Horatio Colony Region,2024–25,2555,On Track
District,Riverview School District,Horatio Colony Region,2025–26,2550,On Track
District,Lincoln East School District,Horatio Colony Region,2021–22,2270,Developing
District,Lincoln East School District,Horatio Colony Region,2022–23,2295,Developing
District,Lincoln East School District,Horatio Colony Region,2023–24,2315,Developing
District,Lincoln East School District,Horatio Colony Region,2024–25,2350,Developing
District,Lincoln East School District,Horatio Colony Region,2025–26,2320,Developing
District,Lincoln West School District,Horatio Colony Region,2021–22,2430,Developing
District,Lincoln West School District,Horatio Colony Region,2022–23,2465,Developing
District,Lincoln West School District,Horatio Colony Region,2023–24,2474,Developing
District,Lincoln West School District,Horatio Colony Region,2024–25,2511,Developing
District,Lincoln West School District,Horatio Colony Region,2025–26,2484,Developing
`;

const rows = csvData.trim().split(/\r?\n/).map(r => r.split(","));
const headers = rows[0];
const orgTypeIndex = headers.indexOf("Organization Type");
const orgIndex = headers.indexOf("Organization");
const yearIndex = headers.indexOf("Test Administration");
const scoreIndex = headers.indexOf("Average Scale Score");
const groupIndex = headers.indexOf("Group");
const categories = [...new Set(rows.slice(1).map(r => r[yearIndex]))];

const orgData = {};
rows.slice(1).forEach(row => {
  const orgType = row[orgTypeIndex];
  const org = row[orgIndex];
  const score = parseFloat(row[scoreIndex]);
  const group = row[groupIndex];

  if (!orgData[org]) {
    let color, lineWidth = 2, dashStyle = "Solid";
    if (org === "State Average") {
      color = "black"; lineWidth = 4; dashStyle = "Solid";
    } else if (orgType === "Region") {
      color = "#0275D8"; lineWidth = 3; dashStyle = "Dash";
    } else if (org === "Lincoln West School District") {
      color = "#444"; lineWidth = 3; dashStyle = "Dot";
    } else if (group === "Advanced") {
      color = "#0275D8";
    } else if (group === "On Track") {
      color = "#5CB85C";
    } else if (group === "Developing") {
      color = "#D9534F";
    }
    orgData[org] = { name: org, data: [], group, color, lineWidth, dashStyle };
  }
  orgData[org].data.push(score);
});

function makeHeaderSeries(groupName) {
  return {
    name: groupName,
    color: "transparent",
    showInLegend: true,
    enableMouseTracking: false,
    marker: { enabled: false },
    events: {
      legendItemClick: function (e) {
        e.preventDefault();
        const chart = this.chart;
        chart.series.forEach(s => {
          if (s.userOptions.group === groupName) s.setVisible(!s.visible, false);
        });
        chart.redraw();
      }
    }
  };
}

Highcharts.chart("container", {
  chart: {
    type: "line",
    height: 650,
    events: {
      load: function () {
        const c = this;
        const x = c.plotLeft + 15, y = c.plotTop + 10;
        c.renderer.rect(x - 10, y - 25, 260, 70, 5)
          .attr({ fill: "#fff", stroke: "#999", "stroke-width": 1, zIndex: 5 }).add();
        c.renderer.text("Proficiency Cut Scores:", x, y)
          .css({ fontWeight: "bold", fontSize: "12px" }).add();
        c.renderer.text("• < 2500 = Developing", x, y + 18).css({ fontSize: "12px" }).add();
        c.renderer.text("• 2500–2599 = On Track", x, y + 36).css({ fontSize: "12px" }).add();
        c.renderer.text("• ≥ 2600 = Advanced", x, y + 54).css({ fontSize: "12px" }).add();
      }
    }
  },
  title: { text: "General Assessment ELA Grade 5 – Longitudinal Report", align: "center" },
  xAxis: { categories, title: { text: "School Year" } },
  yAxis: {
    title: { text: "Mean Scale Score" },
    plotLines: [
      { value: 2500, color: "#27AE60", dashStyle: "ShortDash", width: 2,
        label: { text: "On Track cut score (2500)", align: "right", x: -10,
                 style: { color: "#000", fontWeight: "bold", backgroundColor: "#fff" }}, zIndex: 3 },
      { value: 2600, color: "#2980B9", dashStyle: "ShortDash", width: 2,
        label: { text: "Advanced cut score (2600)", align: "right", x: -10,
                 style: { color: "#000", fontWeight: "bold", backgroundColor: "#fff" }}, zIndex: 3 }
    ]
  },
  legend: { layout: "vertical", align: "right", verticalAlign: "middle", navigation: { enabled: true } },
  plotOptions: { series: { marker: { enabled: true } } },
  series: [
    makeHeaderSeries("Advanced"),
    ...Object.values(orgData).filter(s => s.group === "Advanced"),
    makeHeaderSeries("On Track"),
    ...Object.values(orgData).filter(s => s.group === "On Track"),
    makeHeaderSeries("Developing"),
    ...Object.values(orgData).filter(s => s.group === "Developing")
  ]
});
</script>
</body>
</html>
